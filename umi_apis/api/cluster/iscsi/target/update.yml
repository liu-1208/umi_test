config:
    name: Iscsi Target Update
    base_url: ${ENV(API_URL)}
    variables:
        ret_code: 200
        req_host: 127.0.0.1
        iqn: iqn.2021-10.cluster-01.target-01
        client_addrs: ["127.0.0.1", "192.168.1.0/24"]

teststeps:
-
    name: API
    request:
        url: /cluster/iscsi/target/update
        method: POST
        json: ${gen_data(
                req_host=$req_host,
                iqn=$iqn,
                client_addrs=$client_addrs
            )}
    validate:
        - eq: ["status_code", $ret_code]
