
config:
    name: "request methods testcase with functions"
    parameters:
        user-uid-passwd-group-gid: ${P(umi_node/data/users.csv)}
    # base_url: ${ENV(node_url)}
    base_url: ${get_node_url()}

teststeps:
-
    name: Test Local User List
    request:
        method: POST
        url: "/user/user/list"
        json: {}
    validate:
        - eq: ["status_code", 200]
-
    name: Test Local Group List
    request:
        method: POST
        url: "/user/group/list"
        json: {}
    validate:
        - eq: ["status_code", 200]
-
    name: Test Local Group Update
    request:
        method: POST
        url: "/user/group/update"
        json: {
          "group": $group, 
          "gid": $gid
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Test Local User Update
    request:
        method: POST
        url: "/user/user/update"
        json: {
          "user": $user, 
          "passwd": $passwd,
          "group": $group,
          "shell": "/bin/bash",
          "uid": $uid,
          "ex_groups": [ $group ]
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Test Local User Delete
    request:
        method: POST
        url: "/user/user/delete"
        json: { "user": $user }
    validate:
        - eq: ["status_code", 200]
-
    name: Test Local Group Delete
    request:
        method: POST
        url: "/user/group/delete"
        json: { "group": $group }
    validate:
        - eq: ["status_code", 200]
