
config:
    name: "Node Gluster Volume Read Only Test"
    base_url: ${get_node_url()}
    parameters:
        host_ip_01-host_ip_02: ${P(umi_node/data/glusterfs.csv)}
        host01: ${P(umi_node/data/storage.csv)}
    variables:
        vol_name: pytest-vol-01

teststeps:
-
    name: Gluster Volume Create Single
    testcase: umi_node/glusterfs/module/volume_create_single.yml

-
    name: Gluster Volume Read Only
    request:
        method: POST
        url: "/gluster/volume/read_only"
        json: {
          "vol_name": "$vol_name",
          "is_enable": true
        }
    validate:
        - eq: ["status_code", 200]


-
    name: Gluster Volume Worm
    request:
        method: POST
        url: "/gluster/volume/worm"
        json: {
          "vol_name": "$vol_name",
          "is_enable": true
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Gluster Volume File Level
    request:
        method: POST
        url: "/gluster/volume/file_level"
        json: {
          "vol_name": "$vol_name",
          "is_enable": true
        }
    validate:
        - eq: ["status_code", 200]

-
    name: Gluster Volume Files Deletable
    request:
        method: POST
        url: "/gluster/volume/files_deletable"
        json: {
          "vol_name": "$vol_name",
          "is_enable": true
        }
    validate:
        - eq: ["status_code", 200]

-
    name: Gluster Volume Retention Period
    request:
        method: POST
        url: "/gluster/volume/retention_period"
        json: {
          "vol_name": "$vol_name",
          "retention_period": 120
        }
    validate:
        - eq: ["status_code", 200]

-
    name: Gluster Volume Retention Mode
    request:
        method: POST
        url: "/gluster/volume/retention_mode"
        json: {
          "vol_name": "$vol_name",
          "retention_mode": "relax"
        }
    validate:
        - eq: ["status_code", 200]

-
    name: Gluster Volume Auto Commit Period
    request:
        method: POST
        url: "/gluster/volume/auto_commit_period"
        json: {
          "vol_name": "$vol_name",
          "auto_commit_period": 180
        }
    validate:
        - eq: ["status_code", 200]

-
    name: Gluster Volume Delete
    testcase: umi_node/glusterfs/module/volume_delete.yml

























