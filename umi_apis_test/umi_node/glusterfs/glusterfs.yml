
config:
    name: "Node Cluster Glusterd Test"
    base_url: ${get_node_url()}
    parameters:
        host_ip_01-host_ip_02: ${P(umi_node/data/glusterfs.csv)}
        # mode-host01-host02-host03-host04-host05-host06: ${P(umi_node/data/storage.csv)}

teststeps:
-
    name: Gluster Version Info
    request:
        method: POST
        url: "/gluster/version/info"
        json: {}
    validate:
        - eq: ["status_code", 200]
-
    name: Gluster Service Status
    request:
        method: POST
        url: "/gluster/service/status"
        json: {}
    validate:
        - eq: ["status_code", 200]
-
    name: Gluster Service Enable
    request:
        method: POST
        url: "/gluster/service/enable"
        json: {}
    validate:
        - eq: ["status_code", 200]

-
    name: Gluster Pool List
    request:
        method: POST
        url: "/gluster/pool/list"
        json: {}
    validate:
        - eq: ["status_code", 200]

-
    name: Gluster Peer Status
    request:
        method: POST
        url: "/gluster/peer/status"
        json: {}
    validate:
        - eq: ["status_code", 200]

-
    name: Gluster Peer Probe
    testcase: umi_node/glusterfs/module/gluster_peer_probe.yml
    # request:
    #     method: POST
    #     url: "/gluster/peer/probe"
    #     json: {
    #       "host": "$host_ip_01"
    #     }
    # validate:
    #     - eq: ["status_code", 200]
-
    name: Gluster Peer Detach
    testcase: umi_node/glusterfs/module/gluster_peer_detach.yml
    # request:
    #     method: POST
    #     url: "/gluster/peer/detach"
    #     json: {
    #       "host": "$host_ip_01",
    #       "force": false
    #     }
    # validate:
    #     - eq: ["status_code", 200]

-
    name: Gluster Peer List
    request:
        method: POST
        url: "/gluster/pool/cfg/list"
        json: {}
    validate:
        - eq: ["status_code", 200]

-
    name: Gluster Cluster Version
    request:
        method: POST
        url: "/gluster/cluster/versions"
        json: {}
    validate:
        - eq: ["status_code", 200]
-
    name: Gluster Service Disable
    request:
        method: POST
        url: "/gluster/service/disable"
        json: {}
    validate:
        - eq: ["status_code", 200]
-
    name: Gluster Service Enable
    request:
        method: POST
        url: "/gluster/service/enable"
        json: {}
    validate:
        - eq: ["status_code", 200]
