config:
    name: ${ENV(umi_cluster_test_title)}
    base_url: ${ENV(umi_cluster_url)}

teststeps:

# 查看Posix共享
-
    name: Posix Share List
    request:
        method: POST
        url: "/cluster/posix/share/list"
        json: {
            "req_host": "127.0.0.1"
        }
    validate:
        - eq: ["status_code", 200]


# 创建Posix共享
-
    name: Posix Share Update
    request:
        method: POST
        url: "/cluster/posix/share/update"
        json: {
            "req_host": "127.0.0.1",
            "vol_name": "umi_test",
            "share_dir": "/subdir-test",
            "allow_hosts": [
              "172.18.123.0/24",
              "172.169.100.11"
            ],
            "deny_hosts": [
              "192.168.2.0/24"
            ]
        }
    validate:
        - eq: ["status_code", 200]


# 删除Posix共享
-
    name: Posix Share Delete
    request:
        method: POST
        url: "/cluster/posix/share/delete"
        json: {
            "req_host": "127.0.0.1",
            "vol_name": "umi_test",
            "share_dir": "/subdir-test"
        }
    validate:
        - eq: ["status_code", 200]