
config:
    name: "Node Gluster Volume Cache Test"
    base_url: ${get_node_url()}
    parameters:
        req_host-host01-host02-host03: ${P(umi_cluster/data/storage.csv)}
        host01: ${P(umi_node/data/storage.csv)}
    variables:
        vol_name: pytest-vol-01

teststeps:
-
    name: Cluster Volume Cache Size
    request:
        method: POST
        url: "/cluster/volume/cache/cache_size"
        json: {
            "req_host": "$req_host",
            "vol_name": "$vol_name",
            "cache_size": "32MB"
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Rda Cache Limit
    request:
        method: POST
        url: "/cluster/volume/cache/rda_cache_limit"
        json: {
            "req_host": "$req_host",
            "vol_name": "$vol_name",
            "rda_cache_limit": "100MB"
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Md Cache Timeout
    request:
        method: POST
        url: "/cluster/volume/cache/md_cache_timeout"
        json: {
            "req_host": "$req_host",
            "vol_name": "$vol_name",
            "md_cache_timeout": 600
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Performance Cache Invalidation
    request:
        method: POST
        url: "/cluster/volume/cache/performance_cache_invalidation"
        json: {
            "req_host": "$req_host",
            "vol_name": "$vol_name",
            "is_enable": true
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Cache Invalidation Timeout
    request:
        method: POST
        url: "/cluster/volume/cache/cache_invalidation_timeout"
        json: {
            "req_host": "$req_host",
            "vol_name": "$vol_name",
            "cache_invalidation_timeout": 600
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Features Cache Invalidation
    request:
        method: POST
        url: "/cluster/volume/cache/feature_cache_invalidation"
        json: {
            "req_host": "$req_host",
            "vol_name": "$vol_name",
            "is_enable": true
        }
    validate:
        - eq: ["status_code", 200]

