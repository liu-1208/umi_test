
config:
    name: "Cluster Volume Halo Test"
    base_url: ${get_cluster_url()}
    parameters:
        req_host-host01-host02-host03: ${P(umi_cluster/data/storage.csv)}
    variables:
        vol_name: vol-01

teststeps:
-
    name: Cluster Volume Halo
    request:
        method: POST
        url: "/cluster/volume/halo"
        json: {
            "req_host":"$req_host",
            "vol_name": "$vol_name",
            "is_enable": true
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Halo Shd Max Latency
    request:
        method: POST
        url: "/cluster/volume/halo/shd_max_latency"
        json: {
            "req_host":"$req_host",
            "vol_name": "$vol_name",
            "halo_shd_max_latency": 99999
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Halo Nfsd Max Latency
    request:
        method: POST
        url: "/cluster/volume/halo/nfsd_max_latency"
        json: {
            "req_host":"$req_host",
            "vol_name": "$vol_name",
            "halo_nfsd_max_latency": 5
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Halo Max Latency
    request:
        method: POST
        url: "/cluster/volume/halo/max_latency"
        json: {
            "req_host":"$req_host",
            "vol_name": "$vol_name",
            "halo_max_latency": 5
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Halo Max Replicas
    request:
        method: POST
        url: "/cluster/volume/halo/max_replicas"
        json: {
            "req_host":"$req_host",
            "vol_name": "$vol_name",
            "halo_max_replicas": 99999
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Halo Min Replicas
    request:
        method: POST
        url: "/cluster/volume/halo/min_replicas"
        json: {
            "req_host":"$req_host",
            "vol_name": "$vol_name",
            "halo_min_replicas": 2
        }
    validate:
        - eq: ["status_code", 200]

