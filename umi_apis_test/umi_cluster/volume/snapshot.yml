
config:
    name: "Cluster Volume Snapshot Test"
    base_url: ${get_cluster_url()}
    parameters:
        req_host: ${P(umi_cluster/data/storage.csv)}
    variables:
        vol_name: vol-01

teststeps:
-
    name: Cluster Volume Snapshot Create
    request:
        method: POST
        url: "/cluster/volume/snapshot/create"
        json: {
            "req_host": "$req_host",
            "vol_name": "$vol_name",
            "snapname": "snapshot-lvm2-1",
            "is_no_timestamp": true,
            "description": "XDFS快照卷信息",
            "is_force": false
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Snapshot Activate
    request:
        method: POST
        url: "/cluster/volume/snapshot/activate"
        json: {
            "req_host": "$req_host",
            "snapname": "snapshot-lvm2-1",
            "is_force": false
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Snapshot Restore
    request:
        method: POST
        url: "/cluster/volume/snapshot/restore"
        json: {
            "req_host": "$req_host",
            "snapname": "snapshot-lvm2-1"
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Snapshot Deactivate
    request:
        method: POST
        url: "/cluster/volume/snapshot/deactivate"
        json: {
            "req_host": "$req_host",
            "snapname": "snapshot-lvm2-1"
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Snapshot List
    request:
        method: POST
        url: "/cluster/volume/snapshot/list"
        json: {
            "req_host": "$req_host",
            "vol_name": "$vol_name"
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Snapshot Info
    request:
        method: POST
        url: "/cluster/volume/snapshot/info"
        json: {
            "req_host": "$req_host",
            "snapname": "snapshot-lvm2-1",
            "vol_name": "$vol_name"
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Snapshot Status
    request:
        method: POST
        url: "/cluster/volume/snapshot/status"
        json: {
            "req_host": "$req_host",
            "snapname": "snapshot-lvm2-1",
            "vol_name": "$vol_name"
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Snapshot Delete
    request:
        method: POST
        url: "/cluster/volume/snapshot/delete"
        json: {
            "req_host": "$req_host",
            "vol_name": "$vol_name",
            "snapname": "snapshot-lvm2-1",
            "is_all": false,
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Snapshot Clone
    request:
        method: POST
        url: "/cluster/volume/snapshot/clone"
        json: {
            "req_host": "$req_host",
            "clonename": "snapshot-lvm2-clone",
            "snapname": "snapshot-lvm2-1"
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Snapshot Insecure
    request:
        method: POST
        url: "/cluster/volume/snapshot/insecure"
        json: {
            "req_host": "$req_host",
            "vol_name": "$vol_name",
            "is_enable": false
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Snapshot Uss
    request:
        method: POST
        url: "/cluster/volume/snapshot/uss"
        json: {
            "req_host": "$req_host",
            "vol_name": "$vol_name",
            "is_enable": false
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Snapshot Dir
    request:
        method: POST
        url: "/cluster/volume/snapshot/dir"
        json: {
            "req_host": "$req_host",
            "vol_name": "$vol_name",
            "is_enable": false
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume SnapVol Delete
    request:
        method: POST
        url: "/cluster/volume/snapvol/delete"
        json: {
            "req_host": "$req_host",
            "snap_vol_name": "snapshot-lvm2"
        }
    validate:
        - eq: ["status_code", 200]


-
    name: Cluster Volume Snapshot Schedule Init
    request:
        method: POST
        url: "/cluster/volume/snapshot/schedule/init"
        json: {
            "req_host": "$req_host"
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Snapshot Schedule Date Add
    request:
        method: POST
        url: "/cluster/volume/snapshot/schedule/date/add"
        json: {
            "req_host": "$req_host",
            "job_id": "task1"
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Snapshot Schedule Interval Add
    request:
        method: POST
        url: "/cluster/volume/snapshot/schedule/interval/add"
        json: {
            "req_host": "$req_host",
            "job_id": "task1"
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Snapshot Schedule Cron Add
    request:
        method: POST
        url: "/cluster/volume/snapshot/schedule/cron/add"
        json: {
            "req_host": "$req_host",
            "job_id": "task1"
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Snapshot Schedule Pause
    request:
        method: POST
        url: "/cluster/volume/snapshot/schedule/pause"
        json: {
            "req_host": "$req_host",
            "job_id": "task1"
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Snapshot Schedule Resume
    request:
        method: POST
        url: "/cluster/volume/snapshot/schedule/resume"
        json: {
            "req_host": "$req_host",
            "job_id": "task1"
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Snapshot Schedule Remove
    request:
        method: POST
        url: "/cluster/volume/snapshot/schedule/remove"
        json: {
            "req_host": "$req_host",
            "job_id": "task1"
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Snapshot Schedule Get
    request:
        method: POST
        url: "/cluster/volume/snapshot/schedule/get"
        json: {
            "req_host": "$req_host"
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Snapshot Schedule Info
    request:
        method: POST
        url: "/cluster/volume/snapshot/schedule/info"
        json: {
            "req_host": "$req_host"
        }
    validate:
        - eq: ["status_code", 200]

