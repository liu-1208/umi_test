
config:
    name: "Cluster Volume Readonly Test"
    base_url: ${get_cluster_url()}
    parameters:
        req_host-host01-host02-host03: ${P(umi_cluster/data/storage.csv)}
    variables:
        vol_name: vol-01
        mode: Replica

teststeps:
-
    name: Cluster Volume Read Only
    request:
        method: POST
        url: "/cluster/volume/read_only"
        json: {
            "req_host": "$req_host",
            "vol_name": "$vol_name",
            "is_enable": true
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Worm
    request:
        method: POST
        url: "/cluster/volume/worm"
        json: {
            "req_host": "$req_host",
            "vol_name": "$vol_name",
            "is_enable": true
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume File Level
    request:
        method: POST
        url: "/cluster/volume/file_level"
        json: {
            "req_host": "$req_host",
            "vol_name": "$vol_name",
            "is_enable": true
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Worm Files Deletable
    request:
        method: POST
        url: "/cluster/volume/worm/files_deletable"
        json: {
            "req_host": "$req_host",
            "vol_name": "$vol_name",
            "is_enable": true
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Retention Period
    request:
        method: POST
        url: "/cluster/volume/retention_period"
        json: {
            "req_host": "$req_host",
            "vol_name": "$vol_name",
            "retention_period": 120
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Retention Mode
    request:
        method: POST
        url: "/cluster/volume/retention_mode"
        json: {
            "req_host": "$req_host",
            "vol_name": "$vol_name",
            "retention_mode": "relax"
        }
    validate:
        - eq: ["status_code", 200]
-
    name: Cluster Volume Auto Commit Period
    request:
        method: POST
        url: "/cluster/volume/auto_commit_period"
        json: {
            "req_host": "$req_host",
            "vol_name": "$vol_name",
            "auto_commit_period": 180
        }
    validate:
        - eq: ["status_code", 200]

-
    name: Cluster Volume Read Only
    request:
        method: POST
        url: "/cluster/volume/read_only"
        json: {
            "req_host": "$req_host",
            "vol_name": "$vol_name",
            "is_enable": false
        }
    validate:
        - eq: ["status_code", 200]
