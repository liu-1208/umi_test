
config:
    name: "Cluster Network Test"
    base_url: ${get_cluster_url()}
    parameters:
        req_host: ${P(umi_cluster/data/network.csv)}

teststeps:
-
    name: Network Interface Status
    request:
        method: POST
        url: "/network/interface/status"
        json: {
            "req_host": "$req_host"
        }
    validate:
        - eq: ["status_code", 200]

-
    name: Network Dns Hostname Get
    request:
        method: POST
        url: "/network/dns/hostname/get"
        json: {
            "req_host": "$req_host"
        }
    extract:
      hostname: body.data
    validate:
        - eq: ["status_code", 200]

-
    name: Network Dns Hostname Set
    request:
        method: POST
        url: "/network/dns/hostname/det"
        json: {
            "req_host": "$req_host",
            "hostname": "$hostname"
        }
    validate:
        - eq: ["status_code", 200]

